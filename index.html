<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Weather Radar - Markham</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <div id="loader" class="loader"></div>
    <div id="map"></div>

    <div class="weather-panel">
      <h2>
        <span class="location-dot"></span>
        Markham, ON
      </h2>
      <div class="weather-grid">
        <div class="weather-item">
          <h3>Temperature</h3>
          <div class="weather-value temp-value" id="temperature">--Â°C</div>
        </div>
        <div class="weather-item">
          <h3>Wind Speed</h3>
          <div class="weather-value wind-value" id="windSpeed">-- km/h</div>
          <div class="wind-direction" id="windDirection">--</div>
        </div>
      </div>

      <div class="forecast-section">
        <div class="forecast-header" onclick="toggleForecast()">
          <h3>5-Day Forecast</h3>
          <span class="forecast-toggle">â–¼</span>
        </div>
        <div class="forecast-content" id="forecast-content">
          <div id="forecast"></div>
        </div>
      </div>

      <div class="status-indicator">
        <div class="status-live">
          <div class="status-dot"></div>
          <span>Live â€¢ Updates every 5 min</span>
        </div>
        <div class="status-updated" id="last-updated">
          Last updated: Loading...
        </div>
      </div>
    </div>

    <!-- Enhanced Radar Legend -->
    <div class="radar-legend">
      <h4 id="legend-title">Precipitation (Reflectivity dBZ)</h4>
      <div class="legend-scale" id="legend-scale">
        <div class="legend-item">
          <div class="legend-color-info">
            <div class="legend-color legend-clear"></div>
            <span>Clear</span>
          </div>
          <span class="legend-value">0 dBZ</span>
        </div>
        <div class="legend-item">
          <div class="legend-color-info">
            <div class="legend-color legend-light"></div>
            <span>Light</span>
          </div>
          <span class="legend-value">5â€“20 dBZ</span>
        </div>
        <div class="legend-item">
          <div class="legend-color-info">
            <div class="legend-color legend-moderate"></div>
            <span>Moderate</span>
          </div>
          <span class="legend-value">20â€“35 dBZ</span>
        </div>
        <div class="legend-item">
          <div class="legend-color-info">
            <div class="legend-color legend-heavy"></div>
            <span>Heavy</span>
          </div>
          <span class="legend-value">35â€“45 dBZ</span>
        </div>
        <div class="legend-item">
          <div class="legend-color-info">
            <div class="legend-color legend-intense"></div>
            <span>Intense</span>
          </div>
          <span class="legend-value">45â€“55 dBZ</span>
        </div>
        <div class="legend-item">
          <div class="legend-color-info">
            <div class="legend-color legend-extreme"></div>
            <span>Extreme</span>
          </div>
          <span class="legend-value">55+ dBZ</span>
        </div>
      </div>
      <div class="legend-divider"></div>
      <h4>Overlay Types</h4>
      <div class="overlay-scale">
        <div class="legend-item" id="overlay-item-clouds">
          <div class="legend-color-info">
            <div class="legend-color overlay-clouds"></div>
            <span>Clouds</span>
          </div>
        </div>
        <div class="legend-item" id="overlay-item-rain" style="display: none;">
          <div class="legend-color-info">
            <div class="legend-color overlay-rain"></div>
            <span>Rain</span>
          </div>
        </div>
        <div class="legend-item" id="overlay-item-snow" style="display: none;">
          <div class="legend-color-info">
            <div class="legend-color overlay-snow"></div>
            <span>Snow</span>
          </div>
        </div>
      </div>

      <div class="overlay-controls" id="overlay-controls">
        <button class="overlay-btn active" data-overlay="radar">Radar</button>
        <button class="overlay-btn" data-overlay="owm-rain">Rain</button>
        <button class="overlay-btn" data-overlay="owm-snow">Snow</button>
        <button class="overlay-btn active" data-overlay="clouds">Clouds</button>
      </div>
    </div>

    <!-- Timeline Controls -->
    <div class="timeline-container">
      <div class="timeline-header">
        <div class="timeline-time" id="current-time">4:57:32 PM</div>
        <div class="timeline-status" id="timeline-status">
          Live â€¢ Current Local Time
        </div>
      </div>

      <div class="timeline-controls">
        <button class="timeline-btn" id="replay-btn" onclick="replayRadar()">
          <span>âªª</span> Replay
        </button>
        <button class="timeline-btn active" id="live-btn" onclick="goLive()">
          <span>ðŸ”´</span> Live
        </button>
        <button class="timeline-btn" id="forecast-btn" onclick="showForecast()">
          <span>â©¥</span> +1hr
        </button>
      </div>

      <div
        class="timeline-slider"
        id="timeline-slider"
        onclick="handleTimelineClick(event)"
      >
        <div class="timeline-track">
          <div
            class="timeline-handle"
            id="timeline-handle"
            style="left: 50%"
          ></div>
        </div>
      </div>

      <div class="timeline-markers">
        <span>-30 min</span>
        <span>Now</span>
        <span>+30 min</span>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="assets/js/config.js"></script>
    <script src="assets/js/forecast.js"></script>
    <script src="assets/js/timeline.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
